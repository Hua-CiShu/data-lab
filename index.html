<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Data Lab</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <h1>Data Lab</h1>
        <button id="themeToggle" class="theme-toggle btn ghost sm" type="button">🌙 深色</button>
        <button id="sidebarPin" type="button">⟨</button>
      </div>

      <nav class="nav">
        <div class="nav-item">
          <div class="nav-head" data-route="home"><div class="title"><span>首页</span></div></div>
        </div>
      <!-- 数据清洗 -->
<div class="nav-item">
  <div class="nav-head" data-route="clean"><div class="title"><span>数据清洗</span></div></div>
  <div class="submenu">
    <a href="#" data-route="drop-empty">空行删除</a>
    <a href="#" data-route="trim">首尾空白清理</a>
    <a href="#" data-route="dedupe">重复行去重</a>
    <a href="#" data-route="fill-missing">缺失值填充</a>
    <a href="#" data-route="drop-cols">删除列</a>
    <a href="#" data-route="type-cast">类型转换</a>
  </div>
</div>

<!-- 数据分析 -->
<div class="nav-item">
  <div class="nav-head" data-route="analyze"><div class="title"><span>数据分析</span></div></div>
  <div class="submenu">
    <a href="#" data-route="bar">柱状图</a>
    <a href="#" data-route="line">折线图</a>
    <a href="#" data-route="box">箱线图</a>
    <a href="#" data-route="pie">饼图</a>
    <a href="#" data-route="histogram">直方图（自动分箱）</a>
    <a href="#" data-route="heatmap">热力图</a>
    <a href="#" data-route="wordcloud">词云图</a>
  </div>
</div>

        <div class="nav-footer">
          <button id="btnTests" class="btn small" type="button">运行自检</button>
          <div id="tests" class="muted" style="margin-top:6px;"></div>
        </div>
      </nav>
    </aside>

    <!-- Main -->
    <main class="main">
      <!-- 顶部工具组（95% 玻璃、固定、可“扇形”柔和收起） -->
      <div id="controlsWrap" class="controls-wrap">
        <div id="controlsPanel" class="controls">
          <div class="controls-row">
            <span class="chip">数据源</span>
            <select id="adapterSelect" class="sm">
              <option value="csv">CSV</option>
              <option value="excel">Excel（.xlsx）</option>
              <option value="sqlite">SQLite（.db）</option>
              <option value="json">JSON</option>
            </select>

            <input id="fileInput" class="sm" type="file" />
            <button id="btnLoad" class="btn sm" type="button">读取</button>

            <span class="chip">预览行数</span>
            <select id="previewRows" class="sm">
              <option>5</option><option selected>10</option><option>20</option><option>50</option>
            </select>
            <button id="btnPreview" class="btn sm" type="button">预览</button>

            <span id="metaChip" class="badge">未加载</span>

            <!-- 收起工具组按钮（右上把手固定，不改变位置） -->
            <button id="controlsToggle" class="control-toggle tiny" type="button" title="隐藏工具组">⟩</button>
          </div>
        </div>
      </div>

      <div id="view"></div>
    </main>
  </div>

  <!-- 第三方库：在 app.js 之前 -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/plotly.js-dist-min@2.35.2/plotly.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/wordcloud@1.2.2/src/wordcloud2.js"></script>

  <!-- 入口（ESM） -->
  <script type="module" src="assets/js/app.js"></script>
</body>
</html>
